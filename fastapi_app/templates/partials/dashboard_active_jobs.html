{% if active_jobs %}
<div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
        <span>âš¡</span> Active Jobs
        <span class="text-sm font-normal text-gray-500">({{ active_jobs | length }})</span>
    </h2>

    {% for job in active_jobs %}
    <div data-job-id="{{ job.id }}" class="border-b last:border-b-0 py-4">
        <div class="flex justify-between items-center mb-2">
            <div class="flex-1">
                <h3 class="font-semibold text-gray-900">{{ job.name }}</h3>
                <p class="text-sm text-gray-500">
                    <span class="inline-block px-2 py-0.5 bg-gray-100 rounded text-xs font-mono">{{ job.type }}</span>
                    <span class="ml-2">{{ job.source }}</span>
                </p>
            </div>
            <div class="text-right ml-4">
                <p class="font-bold text-lg text-blue-600">{{ job.progress.percent }}%</p>
                <p class="text-sm text-gray-500 speed-info">{{ (job.progress.speed_bytes / 1024) | round(2) }} KB/s</p>
            </div>
        </div>
        <div class="mt-2">
            <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                <div class="progress-bar bg-blue-600 h-3 rounded-full transition-all duration-500"
                     style="width: {{ job.progress.percent }}%"></div>
            </div>
        </div>
        <div class="mt-2 grid grid-cols-2 gap-4 text-xs text-gray-600">
            <div class="transfer-info">
                Transferred: {{ (job.progress.bytes_transferred / 1048576) | round(2) }} / {{ (job.progress.total_bytes / 1048576) | round(2) }} MB
            </div>
            <div class="eta-info text-right">
                ETA: {% if job.progress.eta_seconds > 0 %}{{ (job.progress.eta_seconds / 60) | round(1) }} min{% else %}calculating...{% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="bg-white rounded-lg shadow p-6 text-center">
    <div class="text-gray-300 mb-3">
        <svg class="mx-auto h-16 w-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
    </div>
    <h3 class="text-lg font-medium text-gray-600 mb-1">No Active Jobs</h3>
    <p class="text-sm text-gray-500 mb-4">All backup jobs are idle</p>
    <a href="/jobs" class="inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition text-sm">
        View All Jobs
    </a>
</div>
{% endif %}

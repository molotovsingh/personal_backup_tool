<!-- Job Details (lazy loaded content) -->
<div class="mt-3 space-y-2 text-sm">
    <div class="flex items-center gap-2">
        <span class="px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs font-mono">{{ job.type }}</span>
        {% if job.settings.delete_source_after %}
        <span class="px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-semibold">
            üóëÔ∏è Deletion Enabled
        </span>
        {% endif %}
    </div>
    <p class="text-gray-600">
        <span class="font-semibold">Source:</span> <span class="font-mono text-xs">{{ job.source }}</span>
    </p>
    <p class="text-gray-600">
        <span class="font-semibold">Dest:</span> <span class="font-mono text-xs">{{ job.dest }}</span>
    </p>
</div>

<!-- Progress Bar (for running/paused jobs with progress) -->
{% if job.status in ['running', 'paused'] or job.progress.percent > 0 %}
<div class="mt-4">
    <div class="flex justify-between text-sm text-gray-600 mb-1">
        <span class="transfer-info">
            {{ (job.progress.bytes_transferred / 1024 / 1024) | round(2) }} MB / {{ (job.progress.total_bytes / 1024 / 1024) | round(2) }} MB
        </span>
        <span class="font-semibold">
            {% if job.progress.percent == 0 and job.progress.total_bytes == 0 %}
                üîç Preparing transfer...
            {% else %}
                {{ job.progress.percent }}%
            {% endif %}
        </span>
    </div>
    <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
        <div class="progress-bar bg-blue-600 h-4 rounded-full transition-all duration-500 flex items-center justify-center text-xs text-white font-semibold"
             style="width: {{ job.progress.percent }}%">
            {% if job.progress.percent > 10 %}{{ job.progress.percent }}%{% endif %}
        </div>
    </div>
</div>

<!-- Transfer Stats (only for running jobs) -->
{% if job.status == 'running' %}
<div class="mt-3 grid grid-cols-2 gap-4 text-sm">
    <div>
        <span class="text-gray-600">Speed:</span>
        <span class="speed-info font-semibold ml-1">
            {{ (job.progress.speed_bytes / 1024) | round(2) }} KB/s
        </span>
    </div>
    <div>
        <span class="text-gray-600 eta-info">
            ETA: {% if job.progress.eta_seconds > 0 %}{{ (job.progress.eta_seconds / 60) | round(1) }} min{% else %}calculating...{% endif %}
        </span>
    </div>
</div>

<!-- Deletion Progress (if deletion is active) -->
{% if job.progress.deletion and job.progress.deletion.enabled %}
<div class="deletion-progress mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
    <div class="text-sm">
        <span class="font-semibold text-yellow-900">Deletion Phase:</span>
        <span class="deletion-phase-text">
        {% if job.progress.deletion.phase == 'transfer' %}
            <span class="text-yellow-700">Transferring files...</span>
        {% elif job.progress.deletion.phase == 'verifying' %}
            <span class="text-blue-700">üîç Verifying backup integrity...</span>
        {% elif job.progress.deletion.phase == 'deleting' %}
            <span class="text-red-700">üóëÔ∏è Deleting source files... (<span class="deletion-files-count">{{ job.progress.deletion.files_deleted }}</span> files, <span class="deletion-bytes-count">{{ (job.progress.deletion.bytes_deleted / 1024 / 1024) | round(2) }}</span> MB)</span>
        {% elif job.progress.deletion.phase == 'completed' %}
            <span class="text-green-700">‚úÖ Deletion completed (<span class="deletion-files-count">{{ job.progress.deletion.files_deleted }}</span> files deleted)</span>
        {% elif job.progress.deletion.phase == 'failed' %}
            <span class="text-red-700">‚ùå Deletion failed</span>
        {% endif %}
        </span>
    </div>
</div>
{% endif %}
{% endif %}
{% endif %}

<!-- Job Settings Info -->
<div class="mt-4 pt-3 border-t border-gray-200">
    <div class="grid grid-cols-2 gap-4 text-xs text-gray-600">
        <div>
            <span class="font-semibold">Bandwidth:</span>
            {% if job.settings.bandwidth_limit %}{{ job.settings.bandwidth_limit }} KB/s{% else %}Unlimited{% endif %}
        </div>
        <div>
            <span class="font-semibold">Created:</span>
            {{ job.created_at[:10] }}
        </div>
    </div>
</div>